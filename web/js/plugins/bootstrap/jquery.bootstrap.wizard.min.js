/*! Express.Admin 最后修改于：2016-03-19 */
!function(a){var b=function(b,c){b=a(b);var d=this,e=[],f=a.extend({},a.fn.bootstrapWizard.defaults,c),g=null,h=null;this.rebindClick=function(a,b){a.unbind("click",b).bind("click",b)},this.fixNavigationButtons=function(){return g.length||(h.find("a:first").tab("show"),g=h.find('li:has([data-toggle="tab"]):first')),a(f.previousSelector,b).toggleClass("disabled",d.firstIndex()>=d.currentIndex()),a(f.nextSelector,b).toggleClass("disabled",d.currentIndex()>=d.navigationLength()),a(f.backSelector,b).toggleClass("disabled",0==e.length),d.rebindClick(a(f.nextSelector,b),d.next),d.rebindClick(a(f.previousSelector,b),d.previous),d.rebindClick(a(f.lastSelector,b),d.last),d.rebindClick(a(f.firstSelector,b),d.first),d.rebindClick(a(f.backSelector,b),d.back),f.onTabShow&&"function"==typeof f.onTabShow&&!1===f.onTabShow(g,h,d.currentIndex())?!1:void 0},this.next=function(a){return b.hasClass("last")||f.onNext&&"function"==typeof f.onNext&&!1===f.onNext(g,h,d.nextIndex())?!1:(a=d.currentIndex(),$index=d.nextIndex(),void($index>d.navigationLength()||(e.push(a),h.find('li:has([data-toggle="tab"]):eq('+$index+") a").tab("show"))))},this.previous=function(a){return b.hasClass("first")||f.onPrevious&&"function"==typeof f.onPrevious&&!1===f.onPrevious(g,h,d.previousIndex())?!1:(a=d.currentIndex(),$index=d.previousIndex(),void(0>$index||(e.push(a),h.find('li:has([data-toggle="tab"]):eq('+$index+") a").tab("show"))))},this.first=function(a){return f.onFirst&&"function"==typeof f.onFirst&&!1===f.onFirst(g,h,d.firstIndex())||b.hasClass("disabled")?!1:(e.push(d.currentIndex()),void h.find('li:has([data-toggle="tab"]):eq(0) a').tab("show"))},this.last=function(a){return f.onLast&&"function"==typeof f.onLast&&!1===f.onLast(g,h,d.lastIndex())||b.hasClass("disabled")?!1:(e.push(d.currentIndex()),void h.find('li:has([data-toggle="tab"]):eq('+d.navigationLength()+") a").tab("show"))},this.back=function(){if(0==e.length)return null;var a=e.pop();return f.onBack&&"function"==typeof f.onBack&&!1===f.onBack(g,h,a)?(e.push(a),!1):void b.find('li:has([data-toggle="tab"]):eq('+a+") a").tab("show")},this.currentIndex=function(){return h.find('li:has([data-toggle="tab"])').index(g)},this.firstIndex=function(){return 0},this.lastIndex=function(){return d.navigationLength()},this.getIndex=function(a){return h.find('li:has([data-toggle="tab"])').index(a)},this.nextIndex=function(){return h.find('li:has([data-toggle="tab"])').index(g)+1},this.previousIndex=function(){return h.find('li:has([data-toggle="tab"])').index(g)-1},this.navigationLength=function(){return h.find('li:has([data-toggle="tab"])').length-1},this.activeTab=function(){return g},this.nextTab=function(){return h.find('li:has([data-toggle="tab"]):eq('+(d.currentIndex()+1)+")").length?h.find('li:has([data-toggle="tab"]):eq('+(d.currentIndex()+1)+")"):null},this.previousTab=function(){return 0>=d.currentIndex()?null:h.find('li:has([data-toggle="tab"]):eq('+parseInt(d.currentIndex()-1)+")")},this.show=function(a){a=isNaN(a)?b.find('li:has([data-toggle="tab"]) a[href=#'+a+"]"):b.find('li:has([data-toggle="tab"]):eq('+a+") a"),0<a.length&&(e.push(d.currentIndex()),a.tab("show"))},this.disable=function(a){h.find('li:has([data-toggle="tab"]):eq('+a+")").addClass("disabled")},this.enable=function(a){h.find('li:has([data-toggle="tab"]):eq('+a+")").removeClass("disabled")},this.hide=function(a){h.find('li:has([data-toggle="tab"]):eq('+a+")").hide()},this.display=function(a){h.find('li:has([data-toggle="tab"]):eq('+a+")").show()},this.remove=function(b){var c="undefined"!=typeof b[1]?b[1]:!1;b=h.find('li:has([data-toggle="tab"]):eq('+b[0]+")"),c&&(c=b.find("a").attr("href"),a(c).remove()),b.remove()};var i=function(b){var c=h.find('li:has([data-toggle="tab"])');return b=c.index(a(b.currentTarget).parent('li:has([data-toggle="tab"])')),c=a(c[b]),f.onTabClick&&"function"==typeof f.onTabClick&&!1===f.onTabClick(g,h,d.currentIndex(),b,c)?!1:void 0},j=function(b){return $element=a(b.target).parent(),b=h.find('li:has([data-toggle="tab"])').index($element),$element.hasClass("disabled")||f.onTabChange&&"function"==typeof f.onTabChange&&!1===f.onTabChange(g,h,d.currentIndex(),b)?!1:(g=$element,void d.fixNavigationButtons())};this.resetWizard=function(){a('a[data-toggle="tab"]',h).off("click",i),a('a[data-toggle="tab"]',h).off("shown shown.bs.tab",j),h=b.find("ul:first",b),g=h.find('li:has([data-toggle="tab"]).active',b),a('a[data-toggle="tab"]',h).on("click",i),a('a[data-toggle="tab"]',h).on("shown shown.bs.tab",j),d.fixNavigationButtons()},h=b.find("ul:first",b),g=h.find('li:has([data-toggle="tab"]).active',b),h.hasClass(f.tabClass)||h.addClass(f.tabClass),f.onInit&&"function"==typeof f.onInit&&f.onInit(g,h,0),f.onShow&&"function"==typeof f.onShow&&f.onShow(g,h,d.nextIndex()),a('a[data-toggle="tab"]',h).on("click",i),a('a[data-toggle="tab"]',h).on("shown shown.bs.tab",j)};a.fn.bootstrapWizard=function(c){if("string"==typeof c){var d=Array.prototype.slice.call(arguments,1);return 1===d.length&&d.toString(),this.data("bootstrapWizard")[c](d)}return this.each(function(d){if(d=a(this),!d.data("bootstrapWizard")){var e=new b(d,c);d.data("bootstrapWizard",e),e.fixNavigationButtons()}})},a.fn.bootstrapWizard.defaults={tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",backSelector:".wizard li.back",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onBack:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery);