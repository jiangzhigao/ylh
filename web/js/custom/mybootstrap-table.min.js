/*! Express.Admin 最后修改于：2016-03-19 */
!function(a){function b(){Handlebars.registerHelper("addOne",function(a,b){return parseInt(a)+1})}b.prototype.initPaginator=function(b,c,d,e){a("#"+b.paginator).bootstrapPaginator({currentPage:c.currentPage,totalPages:c.totalPages,numberOfPages:5,bootstrapMajorVersion:3,pageUrl:function(a,b,c){return"javascript:;"},itemTexts:function(a,b,c){switch(a){case"first":return"第一页";case"prev":return"上一页";case"next":return"下一页";case"last":return"最后一页";case"page":return b}},onPageClicked:function(c,f,g,h){b.currentPage=h,d.getData(b,function(c){var d=Handlebars.compile(a("#"+b.templateId).html()),f=d(c.data);e.find("tbody").html(f),c&&a("#"+b.page_text).text("共 "+c.totalPages+" 页 "+c.totalItem+" 条记录，当前为第 "+c.currentPage+" 页")})}}),a("#"+b.page_text).text("共 "+c.totalPages+" 页 "+c.totalItem+" 条记录，当前为第 "+c.currentPage+" 页")},b.prototype.getData=function(a,b){a.queryParams.currentPage=a.currentPage,a.queryParams.pageSize=a.pageSize,jQuery.ajax({dataType:"json",url:a.url,data:a.queryParams,type:"POST",success:function(a){1==a.code?b(a.data):console.log("后台系统异常")},beforeSend:function(){},complete:function(){}})},b.prototype.rendTable=function(b,c,d){var e=Handlebars.compile(a("#"+b.templateId).html()),f=e(d.data);c.find("tbody").html(f)},a.fn.myBootstrapTable=function(c){a.fn.myBootstrapTable.defaults={url:"",paginatorId:"paginator",templateId:"table-template",currentPage:1,pageSize:10,queryParams:{},btnId:"query",getParams:null,not_item:"not_item",page_text:"page_text"};var d=a.extend({},a.fn.myBootstrapTable.defaults,c);return this.each(function(){var c=a(this),e=new b;e.getData(d,function(b){b.data.length>0?(a("#"+d.paginatorId).show(),a("#"+d.page_text).show(),a("#"+d.not_item).hide(),e.initPaginator(d,b,e,c),e.rendTable(d,c,b)):(a("#"+d.paginatorId).hide(),a("#"+d.page_text).hide(),a("#"+d.not_item).show())}),a("#"+d.btnId).click(function(){if(d.currentPage=1,d.getParams){var b=d.getParams();for(var f in b)d.queryParams[f]=b[f]}e.getData(d,function(b){b.data.length>0?(a("#"+d.paginatorId).show(),a("#"+d.page_text).show(),a("#"+d.not_item).hide(),e.initPaginator(d,b,e,c),e.rendTable(d,c,b)):(a("#"+d.paginatorId).hide(),a("#"+d.page_text).hide(),c.find("tbody").html(""),a("#"+d.not_item).show())})})})}}(window.jQuery);