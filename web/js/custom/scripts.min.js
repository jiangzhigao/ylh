/*! Express.Admin 最后修改于：2016-03-19 */
jQuery(function(a){"use strict";function b(a,b,c){return"undefined"!=typeof a.data(b)?a.data(b):c}a.extend({getUrlVars:function(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b},getUrlVar:function(b){return a.getUrlVars()[b]}});var c=window.FOXKEEPER_SETTINGS||{};c.windowBasedLayout=function(){var b=a(window).innerWidth();a("body").hasClass("chat-open")||a("body").hasClass("sidebar-collapse")?c.mainmenuCollapsed():1025>b?(a(".page-topbar").addClass("sidebar_shift").removeClass("chat_shift"),a(".page-sidebar").addClass("collapseit").removeClass("expandit"),a("#main-content").addClass("sidebar_shift").removeClass("chat_shift"),a(".page-chatapi").removeClass("showit").addClass("hideit"),a(".chatapi-windows").removeClass("showit").addClass("hideit"),c.mainmenuCollapsed()):(a(".page-topbar").removeClass("sidebar_shift chat_shift"),a(".page-sidebar").removeClass("collapseit chat_shift"),a("#main-content").removeClass("sidebar_shift chat_shift"),c.mainmenuScroll())},c.loginPage=function(){var b=a(window).innerHeight(),c=a("#login").height(),d=(b-c)/2;if(a("#login").css("margin-top",+d+"px"),a("#login #user_login").length){var e=document.getElementById("user_login");e.focus()}},c.searchPage=function(){var b=a(".search-page-input");b.length&&b.focus()},c.viewportElement=function(){function b(b){var c=a(this);b=a.extend({},b||{},c.data("countToOptions")||{}),c.countTo(b).addClass("counted")}a.isFunction(a.fn.viewportChecker)&&(a(".inviewport").viewportChecker({callbackFunction:function(a,b){}}),a(".number_counter").viewportChecker({classToAdd:"start_timer",offset:10,callbackFunction:function(c){a(".start_timer:not(.counted)").each(b)}}))},c.draggablePanels=function(){a.isFunction(a.fn.sortable)&&a(".sort_panel").sortable({connectWith:".sort_panel",handle:"header.panel_header",cancel:".panel_actions",placeholder:"portlet-placeholder"})},c.breadcrumbAutoHidden=function(){a(".breadcrumb.auto-hidden a").on("mouseover",function(){a(this).removeClass("collapsed")}),a(".breadcrumb.auto-hidden a").on("mouseout",function(){a(this).addClass("collapsed")})},c.sectionBoxActions=function(){a("section.box .actions .box_toggle").on("click",function(){var b=a(this).parent().parent().parent().find(".content-body");b.hasClass("collapsed")?(b.removeClass("collapsed").slideDown(500),a(this).removeClass("fa-chevron-up").addClass("fa-chevron-down")):(b.addClass("collapsed").slideUp(500),a(this).removeClass("fa-chevron-down").addClass("fa-chevron-up"))}),a("section.box .actions .box_close").on("click",function(){content=a(this).parent().parent().parent().remove()})},c.mainmenuScroll=function(){var b=a(".page-topbar").height(),c=a(".project-info").innerHeight(),d=a(window).innerHeight()-b-c;a("#main-menu-wrapper").height(d),a("#main-menu-wrapper .wraplist").height("auto"),a("li.open > .sub-menu").attr("style","display:block;")},c.mainmenuCollapsed=function(){if(a(".page-sidebar.chat_shift #main-menu-wrapper").length>0||a(".page-sidebar.collapseit #main-menu-wrapper").length>0){var b=a(".page-topbar").height(),c=a(window).innerHeight(),d=c-b,e=a(".page-container #main-content .wrapper").height(),f=e;d>e&&(f=d),a(".page-sidebar.chat_shift #main-menu-wrapper .wraplist, .page-sidebar.collapseit #main-menu-wrapper .wraplist").height(f),a("li.open .sub-menu").attr("style","")}},c.mainMenu=function(){a("#main-menu-wrapper li a").click(function(b){if(a(this).next().hasClass("sub-menu")!==!1){var c=a(this).parent().parent(),d=a(this).next();c.children("li.open").children(".sub-menu").slideUp(200),c.children("li.open").children("a").children(".arrow").removeClass("open"),c.children("li").removeClass("open"),d.is(":visible")?(a(this).find(".arrow").removeClass("open"),d.slideUp(200)):(a(this).parent().addClass("open"),a(this).find(".arrow").addClass("open"),d.slideDown(200))}})},c.pageTopBar=function(){a(".page-topbar li.searchform .input-group-addon").click(function(b){a(this).parent().parent().toggleClass("focus"),a(this).parent().find("input").focus()})},c.extraFormSettings=function(){a(".input-group .form-control").focus(function(b){a(this).parent().find(".input-group-addon").addClass("input-focus"),a(this).parent().find(".input-group-btn").addClass("input-focus")}),a(".input-group .form-control").blur(function(b){a(this).parent().find(".input-group-addon").removeClass("input-focus"),a(this).parent().find(".input-group-btn").removeClass("input-focus")})},c.tocifyScrollMenu=function(){if(a.isFunction(a.fn.tocify)){a("#toc").tocify({selectors:"h2,h3,h4,h5",context:".tocify-content",extendPage:!1}).data("toc-tocify")}},c.tooltipsPopovers=function(){a('[rel="tooltip"]').each(function(){var b=a(this).attr("data-animate"),c=a(this).attr("data-color-class");a(this).tooltip({template:'<div class="tooltip '+b+" "+c+'"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'})}),a('[rel="popover"]').each(function(){var b=a(this).attr("data-animate"),c=a(this).attr("data-color-class");a(this).popover({template:'<div class="popover '+b+" "+c+'"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'})})},c.iCheck=function(){if(a.isFunction(a.fn.iCheck)){a('input[type="checkbox"].iCheck').iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"});var b,c=["-green","-red","-yellow","-blue","-aero","-orange","-grey","-pink","-purple","-white"];for(b=0;b<c.length;b++)0==b&&(a("input.icheck-minimal").iCheck({checkboxClass:"icheckbox_minimal"+c[b],radioClass:"iradio_minimal"+c[b],increaseArea:"20%"}),a("input.skin-square").iCheck({checkboxClass:"icheckbox_square"+c[b],radioClass:"iradio_square"+c[b],increaseArea:"20%"}),a("input.skin-flat").iCheck({checkboxClass:"icheckbox_flat"+c[b],radioClass:"iradio_flat"+c[b]}),a("input.skin-line").each(function(){var d=a(this),e=d.next(),f=e.text();e.remove(),d.iCheck({checkboxClass:"icheckbox_line"+c[b],radioClass:"iradio_line"+c[b],insert:'<div class="icheck_line-icon"></div>'+f})})),a("input.icheck-minimal"+c[b]).iCheck({checkboxClass:"icheckbox_minimal"+c[b],radioClass:"iradio_minimal"+c[b],increaseArea:"20%"}),a("input.skin-square"+c[b]).iCheck({checkboxClass:"icheckbox_square"+c[b],radioClass:"iradio_square"+c[b],increaseArea:"20%"}),a("input.skin-flat"+c[b]).iCheck({checkboxClass:"icheckbox_flat"+c[b],radioClass:"iradio_flat"+c[b]}),a("input.skin-line"+c[b]).each(function(){var d=a(this),e=d.next(),f=e.text();e.remove(),d.iCheck({checkboxClass:"icheckbox_line"+c[b],radioClass:"iradio_line"+c[b],insert:'<div class="icheck_line-icon"></div>'+f})})}},c.otherScripts=function(){function c(b,c,d){var e=[b.toString(16),c.toString(16),d.toString(16)];return a.each(e,function(a,b){1===b.length&&(e[a]="0"+b)}),e.join("").toUpperCase()}function d(){var b=a("#slider-red").slider("value"),d=a("#slider-green").slider("value"),e=a("#slider-blue").slider("value"),f=c(b,d,e);a("#slider-swatch").css("background-color","#"+f)}function e(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}if(a.isFunction(a.fn.autosize)&&a(".autogrow").autosize(),a.isFunction(a.fn.inputmask)&&a("[data-mask]").each(function(c,d){var e=a(d),f=e.data("mask").toString(),g={numericInput:b(e,"numeric",!1),radixPoint:b(e,"radixPoint",""),rightAlign:"right"==b(e,"numericAlign","left")},h=b(e,"placeholder",""),i=b(e,"isRegex","");if(h.length&&(g[h]=h),"phone"==f.toLowerCase()&&(f="(999) 999-9999"),"email"==f.toLowerCase()&&(f="Regex",g.regex="[a-zA-Z0-9._%-]+@[a-zA-Z0-9-]+\\.[a-zA-Z]{2,4}"),"fdecimal"==f.toLowerCase()&&(f="decimal",a.extend(g,{autoGroup:!0,groupSize:3,radixPoint:b(e,"rad","."),groupSeparator:b(e,"dec",",")})),"currency"==f.toLowerCase()||"rcurrency"==f.toLowerCase()){var j=b(e,"sign","$");f="999,999,999.99","rcurrency"==f.toLowerCase()?f+=" "+j:f=j+" "+f,g.numericInput=!0,g.rightAlignNumerics=!1,g.radixPoint="."}i&&(g.regex=f,f="Regex"),e.inputmask(f,g)}),a.isFunction(a.fn.autoNumeric)&&a(".autoNumeric").autoNumeric("init"),a.isFunction(a.fn.slider)&&a(".slider").each(function(c,d){var e=a(d),f=a('<span class="ui-label"></span>'),g=f.clone(),h=0!=b(e,"vertical",0)?"vertical":"horizontal",i=b(e,"prefix",""),j=b(e,"postfix",""),k=b(e,"fill",""),l=a(k),m=b(e,"step",1),n=b(e,"value",5),o=b(e,"min",0),p=b(e,"max",100),q=b(e,"min-val",10),r=b(e,"max-val",90),s=e.is("[data-min-val]")||e.is("[data-max-val]"),t=0;if(s){e.slider({range:!0,orientation:h,min:o,max:p,values:[q,r],step:m,slide:function(a,b){var c=(i?i:"")+b.values[0]+(j?j:""),d=(i?i:"")+b.values[1]+(j?j:"");f.html(c),g.html(d),k&&l.val(c+","+d),t++},change:function(a,b){if(1==t){var c=(i?i:"")+b.values[0]+(j?j:""),d=(i?i:"")+b.values[1]+(j?j:"");f.html(c),g.html(d),k&&l.val(c+","+d)}t=0}});var u=e.find(".ui-slider-handle");f.html((i?i:"")+q+(j?j:"")),u.first().append(f),g.html((i?i:"")+r+(j?j:"")),u.last().append(g)}else{e.slider({range:b(e,"basic",0)?!1:"min",orientation:h,min:o,max:p,value:n,step:m,slide:function(a,b){var c=(i?i:"")+b.value+(j?j:"");f.html(c),k&&l.val(c),t++},change:function(a,b){if(1==t){var c=(i?i:"")+b.value+(j?j:"");f.html(c),k&&l.val(c)}t=0}});var u=e.find(".ui-slider-handle");f.html((i?i:"")+n+(j?j:"")),u.html(f)}}),a.isFunction(a.fn.slider)&&a(function(){a("#slider-red, #slider-green, #slider-blue").slider({orientation:"horizontal",range:"min",max:255,value:127,slide:d,change:d}),a("#slider-red").slider("value",235),a("#slider-green").slider("value",70),a("#slider-blue").slider("value",60)}),a.isFunction(a.fn.spinner)&&(a("#spinner").spinner(),a("#spinner2").spinner({min:5,max:2500,step:25,start:1e3,numberFormat:"C"}),a("#spinner3").spinner({spin:function(b,c){return c.value>10?(a(this).spinner("value",-10),!1):c.value<-10?(a(this).spinner("value",10),!1):void 0}})),a.isFunction(a.fn.tagsinput)){var f=-1,g=["primary","info","warning","success"];g=e(g),a("#tagsinput-2").tagsinput({tagClass:function(){return f++,"label label-"+g[f%g.length]}}),a(".mail_compose_to").tagsinput({tagClass:function(){return f++,"label label-"+g[f%g.length]}})}a.isFunction(a.fn.datepicker)&&a(".datepicker").each(function(c,d){var e=a(d),f={minViewMode:b(e,"minViewMode",0),format:b(e,"format","mm/dd/yyyy"),startDate:b(e,"startDate",""),endDate:b(e,"endDate",""),daysOfWeekDisabled:b(e,"disabledDays",""),startView:b(e,"startView",0)},g=e.next(),h=e.prev();e.datepicker(f),g.is(".input-group-addon")&&g.has("a")&&g.on("click",function(a){a.preventDefault(),e.datepicker("show")}),h.is(".input-group-addon")&&h.has("a")&&h.on("click",function(a){a.preventDefault(),e.datepicker("show")})}),a.isFunction(a.fn.daterangepicker)&&a(".daterange").each(function(c,d){var e={Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},f=a(d),g={format:b(f,"format","MM/DD/YYYY"),timePicker:b(f,"timePicker",!1),timePickerIncrement:b(f,"timePickerIncrement",!1),separator:b(f,"separator"," - ")},h=b(f,"minDate",""),i=b(f,"maxDate",""),j=b(f,"startDate",""),k=b(f,"endDate","");f.hasClass("add-date-ranges")&&(g.ranges=e),h.length&&(g.minDate=h),i.length&&(g.maxDate=i),j.length&&(g.startDate=j),k.length&&(g.endDate=k),f.daterangepicker(g,function(a,b){var c=f.data("daterangepicker");f.hasClass("daterange-text")&&f.find("span").html(a.format(c.format)+c.separator+b.format(c.format))}),"object"==typeof g.ranges&&f.data("daterangepicker").container.removeClass("show-calendar")}),a.isFunction(a.fn.timepicker)&&a(".timepicker").each(function(c,d){var e=a(d),f={template:b(e,"template",!1),showSeconds:b(e,"showSeconds",!1),defaultTime:b(e,"defaultTime","current"),showMeridian:b(e,"showMeridian",!0),minuteStep:b(e,"minuteStep",15),secondStep:b(e,"secondStep",15)},g=e.next(),h=e.prev();e.timepicker(f),g.is(".input-group-addon")&&g.has("a")&&g.on("click",function(a){a.preventDefault(),e.timepicker("showWidget")}),h.is(".input-group-addon")&&h.has("a")&&h.on("click",function(a){a.preventDefault(),e.timepicker("showWidget")})}),a.isFunction(a.fn.datetimepicker)&&(a(".form_datetime").datetimepicker({format:"yyyy-mm-dd hh:ii",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:0}),a(".form_datetime_meridian").datetimepicker({format:"dd MM yyyy - hh:ii",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:1}),a(".form_datetime_lang").datetimepicker({language:"fr",format:"yyyy-mm-dd hh:ii",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:0})),a.isFunction(a.fn.colorpicker)&&a(".colorpicker").each(function(b,c){var d=a(c),e={},f=d.next(),g=d.prev(),h=d.siblings(".input-group-addon").find(".sel-color");d.colorpicker(e),f.is(".input-group-addon")&&f.has("a")&&f.on("click",function(a){a.preventDefault(),d.colorpicker("show")}),g.is(".input-group-addon")&&g.has("a")&&g.on("click",function(a){a.preventDefault(),d.colorpicker("show")}),h.length&&(d.on("changeColor",function(a){h.css("background-color",a.color.toHex())}),d.val().length&&h.css("background-color",d.val()))}),a.isFunction(a.fn.select2)&&(a("#s2example-1").select2({placeholder:"Select your country...",allowClear:!0}).on("select2-open",function(){a(this).data("select2").results}),a("#s2example-2").select2({placeholder:"Choose your favorite US Countries",allowClear:!0}).on("select2-open",function(){a(this).data("select2").results}),a("#s2example-4").select2({minimumInputLength:1,placeholder:"Search",ajax:{url:"data/select2-remote-data.php",dataType:"json",quietMillis:100,data:function(a,b){return{limit:-1,q:a}},results:function(a,b){return{results:a}}},formatResult:function(a){return"<div class='select2-user-result'>"+a.name+"</div>"},formatSelection:function(a){return a.name}})),a.isFunction(a.fn.multiSelect)&&(a("#my_multi_select1").multiSelect(),a("#my_multi_select2").multiSelect({selectableOptgroup:!0}),a("#my_multi_select3").multiSelect({selectableHeader:"<input type='text' class='form-control search-input' autocomplete='off' placeholder='search...'>",selectionHeader:"<input type='text' class='form-control search-input' autocomplete='off' placeholder='search...'>",afterInit:function(a){var b=this,c=b.$selectableUl.prev(),d=b.$selectionUl.prev(),e="#"+b.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)",f="#"+b.$container.attr("id")+" .ms-elem-selection.ms-selected";b.qs1=c.quicksearch(e).on("keydown",function(a){return 40===a.which?(b.$selectableUl.focus(),!1):void 0}),b.qs2=d.quicksearch(f).on("keydown",function(a){return 40==a.which?(b.$selectionUl.focus(),!1):void 0})},afterSelect:function(){this.qs1.cache(),this.qs2.cache()},afterDeselect:function(){this.qs1.cache(),this.qs2.cache()}}))},c.exWidgets=function(){var b=a(".notification-widget").height();a(".notification-widget").height(b)},c.exToDoWidget=function(){a(".icheck-minimal-white.todo-task").on("ifChecked",function(b){a(this).parent().parent().addClass("checked")}),a(".icheck-minimal-white.todo-task").on("ifUnchecked",function(b){a(this).parent().parent().removeClass("checked")})},c.exToDoAddTaskWidget=function(){a(".wid-add-task input").on("keypress",function(b){if(13==b.keyCode){var d=Math.random().toString(36).substring(7),e=a(this).val(),e='<li><input type="checkbox" id="task-'+d+'" class="icheck-minimal-white todo-task"><label class="icheck-label form-label" for="task-'+d+'">'+e+"</label></li>";a(this).parent().parent().find(".wid-all-tasks ul").append(e),a(this).val(""),a(this).focus(),c.iCheck(),c.exToDoWidget()}})},c.chatAPI=function(){a(".page-topbar .sidebar_toggle").on("click",function(){var b=a(".page-chatapi"),d=a(".chatapi-windows"),e=a(".page-topbar"),f=a("#main-content"),g=a(".page-sidebar");g.hasClass("collapseit")||g.hasClass("chat_shift")?(g.addClass("expandit").removeClass("collapseit").removeClass("chat_shift"),e.removeClass("sidebar_shift").removeClass("chat_shift"),f.removeClass("sidebar_shift").removeClass("chat_shift"),b.addClass("hideit").removeClass("showit"),d.addClass("hideit").removeClass("showit"),c.mainmenuScroll()):(g.addClass("collapseit").removeClass("expandit").removeClass("chat_shift"),e.addClass("sidebar_shift").removeClass("chat_shift"),f.addClass("sidebar_shift").removeClass("chat_shift"),c.mainmenuCollapsed())})},a(document).ready(function(){c.windowBasedLayout(),c.mainmenuScroll(),c.mainMenu(),c.mainmenuCollapsed(),c.pageTopBar(),c.otherScripts(),c.iCheck(),c.extraFormSettings(),c.tooltipsPopovers(),c.chatAPI(),c.tocifyScrollMenu(),c.breadcrumbAutoHidden(),c.exWidgets(),c.sectionBoxActions(),c.draggablePanels(),c.viewportElement(),c.searchPage(),c.exToDoAddTaskWidget(),c.exToDoWidget()}),a(window).resize(function(){c.windowBasedLayout(),c.loginPage()}),a(window).load(function(){c.loginPage()})});